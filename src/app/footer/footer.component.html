<footer class="tableContainer">
  <div class="flex justify-between w-full items-center">
    <p-inputGroup class="w-full md:w-96">
      <input
        pInputText
        type="text"
        [(ngModel)]="searchTerm"
        (input)="handleInputChange($event)"
        [placeholder]="'FOOTER.SEARCH_PLACEHOLDER' | translate"
        class="w-full h-14 leading-10 text-2xl pl-6"
      />
    </p-inputGroup>

    <p-button
      [label]="'FOOTER.ADD_BUTTON' | translate"
      (click)="showInputGroup = true"
      styleClass="px-10 py-2
    font-mono text-2xl"
    />
  </div>

  <p-dialog
    [header]="
      isEditing
        ? ('FOOTER.UPDATE_ITEM' | translate)
        : ('FOOTER.ADD_ITEM' | translate)
    "
    [(visible)]="showInputGroup"
    [modal]="true"
    [style]="{ width: '30rem' }"
    (onHide)="cancelEdit()"
  >
    <div class="flex items-center gap-4 mb-4">
      <label class="font-semibold w-28">{{
        "FOOTER.ENTER_FRUITS" | translate
      }}</label>
      <input
        pInputText
        [(ngModel)]="newItem.fruits"
        class="flex-auto p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <div class="flex items-center gap-4 mb-4">
      <label class="font-semibold w-28">{{
        "FOOTER.ENTER_VEGETABLE" | translate
      }}</label>
      <input
        pInputText
        [(ngModel)]="newItem.vegetable"
        class="flex-auto p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <div class="flex items-center gap-4 mb-6">
      <label class="font-semibold w-28">{{
        "FOOTER.ENTER_DRINKS" | translate
      }}</label>
      <input
        pInputText
        [(ngModel)]="newItem.drinks"
        class="flex-auto p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>

    <div class="flex justify-end gap-2">
      <p-button
        label="{{ 'FOOTER.CANCEL_BUTTON' | translate }}"
        severity="secondary"
        (click)="cancelEdit()"
      ></p-button>

      <p-button
        [label]="
          isEditing
            ? ('FOOTER.UPDATE_BUTTON' | translate)
            : ('FOOTER.ADD_BUTTON' | translate)
        "
        (click)="AddItem()"
      ></p-button>
    </div>
  </p-dialog>

  <p-toast />
  <p-table [value]="filteredProducts" styleClass="width: 100%" class="table">
    <ng-template pTemplate="header">
      <tr>
        <th>{{ "FOOTER.TABLE.ID" | translate }}</th>
        <th>{{ "FOOTER.TABLE.FRUITS" | translate }}</th>
        <th>{{ "FOOTER.TABLE.VEGETABLE" | translate }}</th>
        <th>{{ "FOOTER.TABLE.DRINKS" | translate }}</th>
        <th>{{ "FOOTER.TABLE.EDIT" | translate }}</th>
        <th>{{ "FOOTER.TABLE.DELETE" | translate }}</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
      <tr class="hover:bg-slate-200 hover:cursor-pointer">
        <td>{{ product.id }}</td>
        <td>{{ product.fruits }}</td>
        <td>{{ product.vegetable }}</td>
        <td>{{ product.drinks }}</td>
        <td>
          <p-button
            severity="warning"
            icon="pi pi-pencil"
            (click)="handleEdit(product, product.id)"
            styleClass="p-button-text p-button-rounded"
          />
        </td>
        <td>
          <p-button
            severity="danger"
            icon="pi pi-trash"
            (click)="handleDelete(product.id)"
            styleClass="p-button-text p-button-rounded "
          />
        </td>
      </tr>
    </ng-template>
  </p-table>
</footer>
